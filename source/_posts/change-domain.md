---
title: 更改网站域名
date: 2018-03-19 6:00:00
updated: 2018-03-19 6:00:00
categories:
  - 技能
  - 建站
tags:
  - 域名
  - 301
keywords: 域名,更换,301,重定向
---

今天我更换了网站的域名，从原来的的 sunziyang.com 改为了 iszy.me，我觉得新的域名比原本的好看一些，可惜我买不起 szy.com 或者 szy.me。网站更改域名算是一件比较大的事情，还是有一些必要的工作要做的，于是在此做一个记录。

<!--more-->

## 网站改版

首先呢，我的网站是通过 jekyll 编译的，一些编译的内容和域名是关联在一起的。我也讲不清楚，就是如果域名不完全匹配，即使是 http 和 https 的区别，网站的一些图标就不能正常显示。所以我需要更改配置后，重新编译网站。其他的网站可能不会遇到我这个问题。

另外，由于我是全站 https 的，更换域名也就需要重新申请一个新域名的 ssl 证书。正好 Let's Encrypt 的泛域名证书已经正式推出了，我也就顺势申请了泛域名证书，现在已经用上了。关于泛域名证书获取的过程可以看我的[上一篇文章](https://www.iszy.cc/2018/03/18/wild-card/)。

## 对旧网站做 301 跳转

为了保证搜索引擎的正常抓取和索引，并尽量减少网站的正常改版过程中的流量损失，要对旧网站做 301 跳转。

网上的教程应该很多吧，无论是针对 Apache 的，还是 Nginx 的，连针对微软的 IIS 的教程都有。我还特别去看过，讲道理还挺简单的，在此我就不赘述了。如果真有人需要，在评论里说一声，我在这里做整理。

对于我来说就比较简单了，我的 VPS 上用的免费的宝塔面板，提供了简单的设置 301 跳转的功能。一般来说，这样子的控制面板应该都会提供这样的功能。

![](https://img.iszy.xyz/20190318212214.png)

## 搜索引擎内更改网站域名

### Google

我就在这里简单讲一下一般流程。

1. 首先在 Search Console 中**添加你的新网站**。
2. 在你的旧网站的控制台中使用**地址更改工具**。
3. 选择你需要迁移至的新地址，确认 301 重定向有效，检查验证方法仍然有效。
4. 然后提交地址更改请求。

接下来就交给 Google 来完成了，他会自动将你旧网站的索引迁移到新网站去，旧网站的索引将会作废，直到最终完成。

### Baidu

1. 首先在百度站长工具中**添加你的新站点**。
2. 进入你的旧网站的控制台，使用**网站改版工具**。
3. 添加改版规则，针对全站域名更换的改版方式，应该选择第一个，**站点改版**。
4. 然后选择刚刚添加的新站点名。
5. 提交，百度会完成接下来的工作。

### 新网站管理

不多说，和你旧网站的管理一致，可能需要等到迁移完成。

## 后话

反正我网站的流量也不多，也不用来赚钱，域名换了也就换了。如果你的网站比较大的话，还是要慎重选择是否要进行网站的改版，会对网站造成很大的影响。
